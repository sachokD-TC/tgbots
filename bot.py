import os
import random
from telegram import Update, ReplyKeyboardMarkup
from telegram.ext import ApplicationBuilder, CommandHandler, MessageHandler, ContextTypes, filters
const port = process.env.PORT || 4000 

# Mapping Russian button labels to English command names
button_map = {
    "ÐŸÐ»Ð¾Ñ…Ð¾": "bad",
    "ÐžÑ‡ÐµÐ½ÑŒ Ð¿Ð»Ð¾Ñ…Ð¾": "verybad",
    "ÐÐ¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ð¾": "ok",
    "ÐžÑ‡ÐµÐ½ÑŒ Ñ…Ð¾Ñ€Ð¾ÑˆÐ¾": "great",
    "Ð”ÐµÐ½ÑŒ": "day",
    "ÐÐ½ÐµÐºÐ´Ð¾Ñ‚": "joke",
    "Ð•Ñ‰Ñ‘ Ð°Ð½ÐµÐºÐ´Ð¾Ñ‚": "morejoke",
    "ÐŸÑ€Ð¾Ñ‰Ð°Ð½Ð¸Ðµ": "bye",
    "ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ": "help"
}

# Russian labels for buttons
button_labels = list(button_map.keys())

# Keyboards
main_keyboard = ReplyKeyboardMarkup(
    [
        ["ÐŸÐ»Ð¾Ñ…Ð¾", "ÐžÑ‡ÐµÐ½ÑŒ Ð¿Ð»Ð¾Ñ…Ð¾"],
        ["ÐÐ¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ð¾", "ÐžÑ‡ÐµÐ½ÑŒ Ñ…Ð¾Ñ€Ð¾ÑˆÐ¾"],
        ["Ð”ÐµÐ½ÑŒ", "ÐÐ½ÐµÐºÐ´Ð¾Ñ‚"],
        ["ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ"]
    ],
    resize_keyboard=True
)

joke_keyboard = ReplyKeyboardMarkup(
    [["Ð•Ñ‰Ñ‘ Ð°Ð½ÐµÐºÐ´Ð¾Ñ‚"], ["ÐŸÑ€Ð¾Ñ‰Ð°Ð½Ð¸Ðµ"]],
    resize_keyboard=True
)

# Sample jokes
jokes = [
    "ÐœÑƒÐ¶Ñ‡Ð¸Ð½Ð° Ð¿Ñ€Ð¸Ñ…Ð¾Ð´Ð¸Ñ‚ Ð² Ð°Ð¿Ñ‚ÐµÐºÑƒ:\nâ€“ Ð£ Ð²Ð°Ñ ÐµÑÑ‚ÑŒ Ñ‡Ñ‚Ð¾-Ð½Ð¸Ð±ÑƒÐ´ÑŒ Ð¾Ñ‚ ÑƒÑÑ‚Ð°Ð»Ð¾ÑÑ‚Ð¸?\nâ€“ ÐšÐ¾Ð½ÐµÑ‡Ð½Ð¾. ÐšÑ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸ Ð¾Ñ‚Ð¿ÑƒÑÐº.",
    "Ð£Ñ‡Ð¸Ñ‚ÐµÐ»ÑŒ ÑÐ¿Ñ€Ð°ÑˆÐ¸Ð²Ð°ÐµÑ‚ Ð’Ð¾Ð²Ð¾Ñ‡ÐºÑƒ:\nâ€“ ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ Ñ‚Ñ‹ Ð¾Ð¿Ð¾Ð·Ð´Ð°Ð» Ð² ÑˆÐºÐ¾Ð»Ñƒ?\nâ€“ ÐŸÐ¾Ñ‚Ð¾Ð¼Ñƒ Ñ‡Ñ‚Ð¾ Ð·Ð²Ð¾Ð½Ð¾Ðº Ð¿Ñ€Ð¾Ð·Ð²ÐµÐ½ÐµÐ» Ð´Ð¾ Ñ‚Ð¾Ð³Ð¾, ÐºÐ°Ðº Ñ Ð¿Ñ€Ð¸ÑˆÑ‘Ð».",
    "Ð¡Ñ‹Ð½ ÑÐ¿Ñ€Ð°ÑˆÐ¸Ð²Ð°ÐµÑ‚ Ñƒ Ð¾Ñ‚Ñ†Ð°:\nâ€“ ÐŸÐ°Ð¿, Ð° ÐºÐ°Ðº Ð¿Ð¸ÑˆÐµÑ‚ÑÑ 'ÑÐ¾Ð²ÐµÑÑ‚ÑŒ'?\nâ€“ Ð›ÑƒÑ‡ÑˆÐµ Ð½Ðµ Ð¿Ð¸ÑˆÐ¸, ÑÑ‹Ð½Ð¾Ðº. Ð£ Ð½ÐµÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ñ… ÐµÑ‘ Ð½ÐµÑ‚, Ð¸ Ð½Ð¸Ñ‡ÐµÐ³Ð¾, Ð¶Ð¸Ð²ÑƒÑ‚.",
    "ÐŸÐ°Ñ†Ð¸ÐµÐ½Ñ‚: Ð”Ð¾ÐºÑ‚Ð¾Ñ€, Ñƒ Ð¼ÐµÐ½Ñ Ð¿Ñ€Ð¾Ð²Ð°Ð»Ñ‹ Ð² Ð¿Ð°Ð¼ÑÑ‚Ð¸.\nÐ”Ð¾ÐºÑ‚Ð¾Ñ€: Ð¡ÐºÐ¾Ð»ÑŒÐºÐ¾ Ð²Ð°Ð¼ Ð»ÐµÑ‚?\nÐŸÐ°Ñ†Ð¸ÐµÐ½Ñ‚: Ð ÐºÑ‚Ð¾ Ð²Ñ‹ Ñ‚Ð°ÐºÐ¾Ð¹?",
    "ÐœÑƒÐ¶ Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ñ‚ Ð¶ÐµÐ½Ðµ:\nâ€“ Ð¯ Ñ€ÐµÑˆÐ¸Ð» Ð·Ð°Ð½ÑÑ‚ÑŒÑÑ ÑÐ¿Ð¾Ñ€Ñ‚Ð¾Ð¼.\nÐ–ÐµÐ½Ð°: â€“ ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾! Ð¡ Ð´Ð¸Ð²Ð°Ð½Ð° Ð½Ð° ÐºÑ€ÐµÑÐ»Ð¾ Ð¿ÐµÑ€ÐµÑÐµÐ»?",
    "â€“ Ð”Ð¾ÐºÑ‚Ð¾Ñ€, Ñƒ Ð¼ÐµÐ½Ñ Ð°Ð»Ð»ÐµÑ€Ð³Ð¸Ñ Ð½Ð° Ð¿Ð¾Ð½ÐµÐ´ÐµÐ»ÑŒÐ½Ð¸ÐºÐ¸.\nâ€“ Ð£ 90% Ð½Ð°ÑÐµÐ»ÐµÐ½Ð¸Ñ Ñ‚Ð° Ð¶Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð°.",
    "â€“ ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ Ñ‚Ñ‹ Ð½Ðµ ÑÐ´ÐµÐ»Ð°Ð» Ð´Ð¾Ð¼Ð°ÑˆÐºÑƒ?\nâ€“ Ð¯ Ñ€ÐµÑˆÐ¸Ð», Ñ‡Ñ‚Ð¾ ÑƒÑ‡Ð¸Ñ‚ÑŒÑÑ Ð²Ñ€ÐµÐ´Ð½Ð¾ Ð´Ð»Ñ Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÑ.",
    "â€“ ÐŸÐ°Ð¿Ð°, Ð° Ñ‚Ñ‹ ÐºÐµÐ¼ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑˆÑŒ?\nâ€“ Ð¯ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸ÑÑ‚.\nâ€“ Ð ÑÑ‚Ð¾ Ð»ÐµÑ‡Ð¸Ñ‚ÑÑ?",
    "â€“ ÐšÐ°ÐºÐ¾Ð¹ Ñƒ Ñ‚ÐµÐ±Ñ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ?\nâ€“ 123456.\nâ€“ ÐÐ°Ð´Ñ‘Ð¶Ð½Ð¾!\nâ€“ ÐšÐ¾Ð½ÐµÑ‡Ð½Ð¾, Ñ ÐµÐ³Ð¾ ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ Ð¼ÐµÐ½ÑÑŽ.",
    "â€“ ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ Ñ‚Ñ‹ Ð¾Ð¿Ð¾Ð·Ð´Ð°Ð»?\nâ€“ Ð¯ Ð½Ðµ Ð¾Ð¿Ð¾Ð·Ð´Ð°Ð», Ñ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð¿Ñ€Ð¸ÑˆÑ‘Ð» Ð¿Ð¾Ð·Ð¶Ðµ.",
    "â€“ Ð§Ñ‚Ð¾ Ñ‚Ñ‹ Ð´ÐµÐ»Ð°ÐµÑˆÑŒ?\nâ€“ Ð”ÑƒÐ¼Ð°ÑŽ.\nâ€“ Ð Ð¿Ð¾Ñ‡ÐµÐ¼Ñƒ Ñ‚Ð°Ðº Ñ‚Ð¸Ñ…Ð¾?\nâ€“ ÐœÑ‹ÑÐ»Ð¸ Ð½Ðµ ÑˆÑƒÐ¼ÑÑ‚.",
    "â€“ Ð¢Ñ‹ Ð³Ð´Ðµ Ð±Ñ‹Ð»?\nâ€“ Ð˜ÑÐºÐ°Ð» Ð²Ð´Ð¾Ñ…Ð½Ð¾Ð²ÐµÐ½Ð¸Ðµ.\nâ€“ ÐÐ°ÑˆÑ‘Ð»?\nâ€“ ÐÐµÑ‚, Ð½Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐ¾ Ð¿Ð¾Ð³ÑƒÐ»ÑÐ».",
    "â€“ ÐšÐ°Ðº Ð´ÐµÐ»Ð°?\nâ€“ ÐšÐ°Ðº Ð² ÑÐºÐ°Ð·ÐºÐµ: Ñ‡ÐµÐ¼ Ð´Ð°Ð»ÑŒÑˆÐµ, Ñ‚ÐµÐ¼ ÑÑ‚Ñ€Ð°ÑˆÐ½ÐµÐµ.",
    "â€“ ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ Ñ‚Ñ‹ Ð½Ðµ Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑˆÑŒ?\nâ€“ Ð¯ Ð² Ñ€ÐµÐ¶Ð¸Ð¼Ðµ ÑÐ½ÐµÑ€Ð³Ð¾ÑÐ±ÐµÑ€ÐµÐ¶ÐµÐ½Ð¸Ñ.",
    "â€“ Ð§Ñ‚Ð¾ Ñ‚Ñ‹ Ð´ÐµÐ»Ð°ÐµÑˆÑŒ?\nâ€“ ÐžÑ‚Ð´Ñ‹Ñ…Ð°ÑŽ Ð¾Ñ‚ Ð¾Ñ‚Ð´Ñ‹Ñ…Ð°.",
    "â€“ Ð¢Ñ‹ Ñ‡ÐµÐ³Ð¾ Ñ‚Ð°ÐºÐ¾Ð¹ Ð²ÐµÑÑ‘Ð»Ñ‹Ð¹?\nâ€“ ÐŸÑ€Ð¾ÑÑ‚Ð¾ Ð·Ð°Ð±Ñ‹Ð», Ñ‡Ñ‚Ð¾ Ñƒ Ð¼ÐµÐ½Ñ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹.",
    "â€“ ÐšÐ°Ðº Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ?\nâ€“ ÐšÐ°Ðº Wi-Fi Ð² Ð¼ÐµÑ‚Ñ€Ð¾: Ñ‚Ð¾ ÐµÑÑ‚ÑŒ, Ñ‚Ð¾ Ð½ÐµÑ‚.",
    "â€“ Ð¢Ñ‹ Ñ‡ÐµÐ³Ð¾ Ð¼Ð¾Ð»Ñ‡Ð¸ÑˆÑŒ?\nâ€“ Ð¡Ð»Ð¾Ð²Ð° Ð·Ð°ÐºÐ¾Ð½Ñ‡Ð¸Ð»Ð¸ÑÑŒ.",
    "â€“ ÐšÐ°Ðº Ð¶Ð¸Ð·Ð½ÑŒ?\nâ€“ ÐšÐ°Ðº Ð·ÐµÐ±Ñ€Ð°: Ñ‡Ñ‘Ñ€Ð½Ð°Ñ, Ð±ÐµÐ»Ð°Ñ, ÑÐ½Ð¾Ð²Ð° Ñ‡Ñ‘Ñ€Ð½Ð°Ñ.",
    "â€“ ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ Ñ‚Ñ‹ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑˆÑŒ?\nâ€“ Ð¯ Ð·Ð°Ð½ÑÑ‚ Ð²Ð°Ð¶Ð½Ñ‹Ð¼Ð¸ Ð¼Ñ‹ÑÐ»ÑÐ¼Ð¸.",
    "â€“ Ð¢Ñ‹ Ð³Ð´Ðµ?\nâ€“ Ð’ Ð¼Ñ‹ÑÐ»ÑÑ….",
    "â€“ Ð§Ñ‚Ð¾ Ð½Ð¾Ð²Ð¾Ð³Ð¾?\nâ€“ Ð’ÑÑ‘ Ð¿Ð¾-ÑÑ‚Ð°Ñ€Ð¾Ð¼Ñƒ.",
    "â€“ ÐšÐ°Ðº Ð´ÐµÐ»Ð°?\nâ€“ Ð›ÑƒÑ‡ÑˆÐµ Ð½Ðµ ÑÐ¿Ñ€Ð°ÑˆÐ¸Ð²Ð°Ð¹.",
    "â€“ Ð¢Ñ‹ Ñ‡ÐµÐ³Ð¾ Ñ‚Ð°ÐºÐ¾Ð¹ Ð³Ñ€ÑƒÑÑ‚Ð½Ñ‹Ð¹?\nâ€“ ÐŸÑ€Ð¾ÑÑ‚Ð¾ ÑƒÐ»Ñ‹Ð±Ð°ÑŽÑÑŒ Ð²Ð½ÑƒÑ‚Ñ€Ð¸.",
    "â€“ ÐšÐ°Ðº ÑƒÑÐ¿ÐµÑ…Ð¸?\nâ€“ Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ â€” Ð½Ðµ ÑÐ´Ð°Ð²Ð°Ñ‚ÑŒÑÑ.",
    "â€“ Ð§Ñ‚Ð¾ Ð´ÐµÐ»Ð°ÐµÑˆÑŒ?\nâ€“ Ð¡Ð¼Ð¾Ñ‚Ñ€ÑŽ Ð² Ð¿Ð¾Ñ‚Ð¾Ð»Ð¾Ðº, Ð¸Ñ‰Ñƒ ÑÐ¼Ñ‹ÑÐ» Ð¶Ð¸Ð·Ð½Ð¸.",
    "â€“ ÐšÐ°Ðº Ñ‚Ñ‹?\nâ€“ ÐšÐ°Ðº Ñ‡Ð°Ð¹Ð½Ð¸Ðº Ð±ÐµÐ· Ð²Ð¾Ð´Ñ‹ â€” Ð²Ñ€Ð¾Ð´Ðµ ÐµÑÑ‚ÑŒ, Ð° Ð¿Ð¾Ð»ÑŒÐ·Ñ‹ Ð¼Ð°Ð»Ð¾.",
    "â€“ Ð§Ñ‚Ð¾ Ð½Ð¾Ð²Ð¾Ð³Ð¾?\nâ€“ ÐžÐ±Ð½Ð¾Ð²Ð¸Ð»ÑÑ, Ð½Ð¾ Ð±Ð°Ð³Ð¸ Ð¾ÑÑ‚Ð°Ð»Ð¸ÑÑŒ.",
    "â€“ ÐšÐ°Ðº Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ?\nâ€“ ÐÐ° ÑƒÑ€Ð¾Ð²Ð½Ðµ Ð¿Ð¾Ð»Ð°.",
    "â€“ Ð§Ñ‚Ð¾ Ñ‚Ñ‹ Ð´ÐµÐ»Ð°ÐµÑˆÑŒ?\nâ€“ ÐŸÑ€Ð¸Ñ‚Ð²Ð¾Ñ€ÑÑŽÑÑŒ Ð·Ð°Ð½ÑÑ‚Ñ‹Ð¼."
]

# Encouragements
encouragements = [
    "Ð¢Ñ‹ ÑƒÐ¼Ð½Ð¸Ñ‡ÐºÐ°, Ñ‡Ñ‚Ð¾ Ð´ÐµÐ»Ð¸ÑˆÑŒÑÑ ÑÐ²Ð¾Ð¸Ð¼Ð¸ Ð¼Ñ‹ÑÐ»ÑÐ¼Ð¸.",
    "ÐšÐ°Ð¶Ð´Ñ‹Ð¹ ÑˆÐ°Ð³ â€” ÑƒÐ¶Ðµ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ðµ Ð²Ð¿ÐµÑ€Ñ‘Ð´.",
    "Ð¢Ñ‹ Ð½Ðµ Ð¾Ð´Ð½Ð°, Ñ Ñ€ÑÐ´Ð¾Ð¼.",
    "Ð”Ð°Ð¶Ðµ Ð¼Ð°Ð»ÐµÐ½ÑŒÐºÐ¸Ðµ Ð¿Ð»Ð°Ð½Ñ‹ â€” ÑÑ‚Ð¾ ÑƒÐ¶Ðµ Ð½Ð°Ñ‡Ð°Ð»Ð¾.",
    "Ð¢Ñ‹ ÑÐ¿Ñ€Ð°Ð²Ð»ÑÐµÑˆÑŒÑÑ Ð»ÑƒÑ‡ÑˆÐµ, Ñ‡ÐµÐ¼ Ð´ÑƒÐ¼Ð°ÐµÑˆÑŒ.",
    "Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ â€” Ð½Ð¾Ð²Ñ‹Ð¹ ÑˆÐ°Ð½Ñ Ð´Ð»Ñ Ñ‡ÐµÐ³Ð¾-Ñ‚Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐ³Ð¾.",
    "Ð¢Ñ‹ Ð·Ð°ÑÐ»ÑƒÐ¶Ð¸Ð²Ð°ÐµÑˆÑŒ Ð·Ð°Ð±Ð¾Ñ‚Ñ‹ Ð¸ Ñ‚ÐµÐ¿Ð»Ð°.",
    "Ð¯ Ð³Ð¾Ñ€Ð¶ÑƒÑÑŒ Ñ‚Ð¾Ð±Ð¾Ð¹ Ð·Ð° Ñ‚Ð¾, Ñ‡Ñ‚Ð¾ Ñ‚Ñ‹ Ð·Ð´ÐµÑÑŒ.",
    "ÐŸÑƒÑÑ‚ÑŒ Ð´ÐµÐ½ÑŒ Ð¿Ñ€Ð¸Ð½ÐµÑÑ‘Ñ‚ Ñ…Ð¾Ñ‚ÑŒ ÐºÐ°Ð¿ÐµÐ»ÑŒÐºÑƒ Ñ€Ð°Ð´Ð¾ÑÑ‚Ð¸.",
    "Ð¢Ñ‹ ÑÐ¸Ð»ÑŒÐ½ÐµÐµ, Ñ‡ÐµÐ¼ ÐºÐ°Ð¶ÐµÑ‚ÑÑ."
]

# Command handlers
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(
        "Ð”Ð¾Ð±Ñ€Ð¾Ðµ ÑƒÑ‚Ñ€Ð¾, ÐÐ¸Ð½Ð° ðŸŒž\nÐšÐ°Ðº Ñ‚Ð²Ð¾Ð¸ Ð´ÐµÐ»Ð° ÑÐµÐ³Ð¾Ð´Ð½Ñ?\n\n"
        "Ð¯ Ñ‚ÑƒÑ‚, Ñ€ÑÐ´Ð¾Ð¼. ÐÐ°Ð¿Ð¸ÑˆÐ¸ Ð¼Ð½Ðµ, ÐºÐ°Ðº Ñ‚Ñ‹ ÑÐµÐ±Ñ Ñ‡ÑƒÐ²ÑÑ‚Ð²ÑƒÐµÑˆÑŒ. "
        "Ð ÐµÑÐ»Ð¸ Ñ…Ð¾Ñ‡ÐµÑˆÑŒ â€” Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð½Ð°Ð¶Ð¼Ð¸ Ð½Ð° ÐºÐ½Ð¾Ð¿ÐºÑƒ Ð½Ð¸Ð¶Ðµ:",
        reply_markup=main_keyboard
    )

async def help(update: Update, context: ContextTypes.DEFAULT_TYPE):
    help_text = "Ð’Ð¾Ñ‚ Ñ‡Ñ‚Ð¾ Ñ ÑƒÐ¼ÐµÑŽ:\n" + "\n".join([f"/{eng} â€” {rus}" for rus, eng in button_map.items()])
    await update.message.reply_text(help_text)

async def bad(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(
        "ÐžÑ‡ÐµÐ½ÑŒ Ð¶Ð°Ð»ÑŒ, Ñ‡Ñ‚Ð¾ Ñ‚Ñ€ÐµÐ²Ð¾Ð¶Ð½Ð¾, ÐÐ¸Ð½Ð¾Ñ‡ÐºÐ°... ÐÐ¾ Ñ‚Ñ‹ Ð½Ðµ Ð¾Ð´Ð½Ð° â€” Ñ Ñ€ÑÐ´Ð¾Ð¼. Ð˜Ð½Ð¾Ð³Ð´Ð° Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð½ÐµÐ¼Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ñ‚ÑŒ ÑƒÐ¶Ðµ Ð»ÐµÐ³Ñ‡Ðµ.\n\n"
        "Ð Ð°ÑÑÐºÐ°Ð¶Ð¸, Ñ‡Ñ‚Ð¾ Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ Ð±ÐµÑÐ¿Ð¾ÐºÐ¾Ð¸Ñ‚? Ð Ñ…Ð¾Ñ‡ÐµÑˆÑŒ, Ñ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ ÑÐ¿Ñ€Ð¾ÑˆÑƒ, ÐºÐ°Ðº Ñ‚Ñ‹ Ð¿Ð»Ð°Ð½Ð¸Ñ€ÑƒÐµÑˆÑŒ Ð¿Ñ€Ð¾Ð²ÐµÑÑ‚Ð¸ Ð´ÐµÐ½ÑŒ?",
        reply_markup=ReplyKeyboardMarkup([["Ð”ÐµÐ½ÑŒ", "ÐÐ½ÐµÐºÐ´Ð¾Ñ‚"]], resize_keyboard=True)
    )

async def verybad(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(
        "Ð¢Ñ€ÐµÐ²Ð¾Ð³Ð° â€” ÐºÐ°Ðº Ð´Ð¾Ð¶Ð´ÑŒ. Ð¢Ñ‹ Ð½Ðµ Ð²Ð¸Ð½Ð¾Ð²Ð°Ñ‚Ð°, Ñ‡Ñ‚Ð¾ Ð¸Ð´Ñ‘Ñ‚. ÐÐ¾ Ñ‚Ñ‹ Ð¿Ð¾Ð´ ÐºÑ€Ñ‹ÑˆÐµÐ¹ â€” Ð¸ Ñ Ñ‚ÑƒÑ‚.\n\n"
        "ÐÑƒ Ð¸ Ð»Ð°Ð´Ð½Ð¾, ÐÐ¸Ð½Ð¾Ñ‡ÐºÐ°â€¦ Ñ ÐºÐµÐ¼ Ð½Ðµ Ð±Ñ‹Ð²Ð°ÐµÑ‚.\nÐ“Ð»Ð°Ð²Ð½Ð¾Ðµ â€” Ñ‚Ñ‹ ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð¿Ñ€Ð¾ÑÐ½ÑƒÐ»Ð°ÑÑŒ. Ð Ñ Ñ‚ÑƒÑ‚. Ð˜ Ð½Ð°Ð»Ð¸Ð²Ð°ÑŽ Ð²Ð¾Ð¾Ð±Ñ€Ð°Ð¶Ð°ÐµÐ¼Ñ‹Ð¹ Ñ‡Ð°Ð¹ â˜•ï¸",
        reply_markup=ReplyKeyboardMarkup([["Ð”ÐµÐ½ÑŒ", "ÐÐ½ÐµÐºÐ´Ð¾Ñ‚"]], resize_keyboard=True)
    )

async def ok(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(
        "Ð’Ð¾Ñ‚ Ð¸ ÑÐ»Ð°Ð²Ð½Ð¾! ÐŸÑƒÑÑ‚ÑŒ Ñ‚Ð°Ðº Ð¸ Ð¾ÑÑ‚Ð°Ñ‘Ñ‚ÑÑ Ð¸Ð»Ð¸ ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑÑ ÐµÑ‰Ñ‘ Ð»ÑƒÑ‡ÑˆÐµ.\n\n"
        "Ð ÐºÐ°Ðº Ñ‚Ñ‹ Ð¿Ð»Ð°Ð½Ð¸Ñ€ÑƒÐµÑˆÑŒ Ð¿Ñ€Ð¾Ð²ÐµÑÑ‚Ð¸ ÑÐ²Ð¾Ð¹ Ð´ÐµÐ½ÑŒ ÑÐµÐ³Ð¾Ð´Ð½Ñ, ÐÐ¸Ð½Ð°?",
        reply_markup=ReplyKeyboardMarkup([["Ð”ÐµÐ½ÑŒ", "ÐÐ½ÐµÐºÐ´Ð¾Ñ‚"]], resize_keyboard=True)
    )

async def great(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(
        "Ð£Ñ… Ñ‚Ñ‹! ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾, ÐÐ¸Ð½Ð°! ðŸ˜Š ÐžÑ‡ÐµÐ½ÑŒ Ñ€Ð°Ð´ Ð·Ð° Ñ‚ÐµÐ±Ñ!\n\n"
        "ÐŸÑƒÑÑ‚ÑŒ Ð´ÐµÐ½ÑŒ Ð±ÑƒÐ´ÐµÑ‚ Ñ‚Ñ‘Ð¿Ð»Ñ‹Ð¼ Ð¸ Ñ€Ð°Ð´Ð¾ÑÑ‚Ð½Ñ‹Ð¼. Ð¥Ð¾Ñ‡ÐµÑˆÑŒ, Ñ€Ð°ÑÑÐºÐ°Ð¶Ñƒ ÑÐ¼ÐµÑˆÐ½Ð¾Ð¹ Ð°Ð½ÐµÐºÐ´Ð¾Ñ‚?",
        reply_markup=ReplyKeyboardMarkup([["ÐÐ½ÐµÐºÐ´Ð¾Ñ‚"]], resize_keyboard=True)
    )

async def day(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(
        "ÐÑƒ Ñ‡Ñ‚Ð¾, ÐÐ¸Ð½Ð°, ÐºÐ°Ðº Ñ‚Ñ‹ Ð¿Ð»Ð°Ð½Ð¸Ñ€ÑƒÐµÑˆÑŒ Ð¿Ñ€Ð¾Ð²ÐµÑÑ‚Ð¸ ÑÐ²Ð¾Ð¹ Ð´ÐµÐ½ÑŒ?\n"
        "Ð§Ñ‚Ð¾-Ð½Ð¸Ð±ÑƒÐ´ÑŒ Ð¼Ð°Ð»ÐµÐ½ÑŒÐºÐ¾Ðµ Ð¿Ñ€Ð¸ÑÑ‚Ð½Ð¾Ðµ Ð·Ð°Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾?\n\n"
        "Ð¯ Ñ‚ÐµÐ±Ñ ÑÐ»ÑƒÑˆÐ°ÑŽ Ð²Ð½Ð¸Ð¼Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾. ÐŸÑ€Ð¾ÑÑ‚Ð¾ Ð½Ð°Ð¿Ð¸ÑˆÐ¸ Ð¼Ð½Ðµ â€” Ñ Ð¾Ñ‚Ð²ÐµÑ‡Ñƒ.",
        reply_markup=ReplyKeyboardMarkup([["ÐÐ½ÐµÐºÐ´Ð¾Ñ‚"]], resize_keyboard=True)
    )
    await update.message.reply_text(random.choice(encouragements))

async def joke(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(
        f"Ð’Ð¾Ñ‚ Ñ‚ÐµÐ±Ðµ Ð°Ð½ÐµÐºÐ´Ð¾Ñ‚, ÐÐ¸Ð½Ð¾Ñ‡ÐºÐ° ðŸ˜Š\n\n{random.choice(jokes)}\n\nðŸ˜„ Ð£Ð»Ñ‹Ð±Ð½ÑƒÐ»Ð°ÑÑŒ? Ð¢Ð¾Ð³Ð´Ð° Ð´ÐµÐ½ÑŒ Ñ‚Ð¾Ñ‡Ð½Ð¾ ÑÑ‚Ð°Ð½ÐµÑ‚ Ð»ÑƒÑ‡ÑˆÐµ!",
        reply_markup=joke_keyboard
    )

async def morejoke(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(
        f"Ð•Ñ‰Ñ‘ Ð¾Ð´Ð¸Ð½? Ð”ÐµÑ€Ð¶Ð¸ÑÑŒ!\n\n{random.choice(jokes)}",
        reply_markup=ReplyKeyboardMarkup([["ÐŸÑ€Ð¾Ñ‰Ð°Ð½Ð¸Ðµ"]], resize_keyboard=True)
    )

async def bye(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(
        "ÐÐ¸Ð½Ð¾Ñ‡ÐºÐ°, Ñ‚Ñ‹ ÑÐµÐ³Ð¾Ð´Ð½Ñ Ð¼Ð¾Ð»Ð¾Ð´ÐµÑ† ÑƒÐ¶Ðµ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð¿Ð¾Ñ‚Ð¾Ð¼Ñƒ, Ñ‡Ñ‚Ð¾ Ð²ÑÑ‚Ñ€ÐµÑ‚Ð¸Ð»Ð° ÑÑ‚Ð¾ ÑƒÑ‚Ñ€Ð¾.\n"
        "ÐŸÑƒÑÑ‚ÑŒ Ð´Ð°Ð»ÑŒÑˆÐµ Ð±ÑƒÐ´ÐµÑ‚ Ð»ÐµÐ³Ñ‡Ðµ, Ñ‚ÐµÐ¿Ð»ÐµÐµ Ð¸ Ñ‡ÑƒÑ‚ÑŒ-Ñ‡ÑƒÑ‚ÑŒ ÑÐ²ÐµÑ‚Ð»ÐµÐµ. Ð¯ Ð·Ð´ÐµÑÑŒ. ÐžÐ±Ð½Ð¸Ð¼Ð°ÑŽ Ð¼Ñ‹ÑÐ»ÐµÐ½Ð½Ð¾.\n\n"
        "Ð”Ð¾ Ð·Ð°Ð²Ñ‚Ñ€Ð°, Ð¼Ð¾Ñ Ñ…Ð¾Ñ€Ð¾ÑˆÐ°Ñ ðŸ¤—"
    )

# Text handler to map Russian button labels to commands
async def handle_text(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = update.message.text
    command = button_map.get(text)
    if command:
        await globals()[command](update, context)

# App setup
app = ApplicationBuilder().token(os.getenv("BOT_TOKEN")).build()
app.add_handler(CommandHandler("start", start))
app.add_handler(CommandHandler("help", help))
app.add_handler(CommandHandler("bad", bad))
app.add_handler(CommandHandler("verybad", verybad))
app.add_handler(CommandHandler("ok", ok))
app.add_handler(CommandHandler("great", great))
app.add_handler(CommandHandler("day", day))
app.add_handler(CommandHandler("joke", joke))
app.add_handler(CommandHandler("morejoke", morejoke))
app.add_handler(CommandHandler("bye", bye))
app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_text))
app.run_polling()

app.listen(port, () => {
  console.log(`Example app listening on port ${port}`)
})